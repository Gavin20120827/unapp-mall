{"version":3,"sources":["webpack:///D:/HBuilderX/项目/Mall/main.js","webpack:///D:/HBuilderX/项目/Mall/pages/me/me.vue?38a1","webpack:///D:/HBuilderX/项目/Mall/pages/me/me.vue?701e","webpack:///D:/HBuilderX/项目/Mall/pages/me/me.vue?bc85","webpack:///D:/HBuilderX/项目/Mall/pages/me/me.vue?cbe7","webpack:///D:/HBuilderX/项目/Mall/pages/me/me.vue","webpack:///D:/HBuilderX/项目/Mall/pages/me/me.vue?5a90","webpack:///D:/HBuilderX/项目/Mall/pages/me/me.vue?6bd0"],"names":["createPage","Page","data","methods","reg","uni","navigateTo","url","getphonenumber","e","ivObj","detail","iv","phoneObj","encryptedData","code","login","success","res","console","log","request","method","appid","secret","errMsg","wx","getUserInfo","serverUrl","common","nickName","avatarUrl","openid","userInfo","js_code","grant_type","wx_openid","wx_nicheng","wx_touxiang","setStorage","key","uid","switchTab"],"mappings":"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","file":"pages/me/me.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/me/me.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./me.vue?vue&type=template&id=40b66da5&\"\nvar renderjs\nimport script from \"./me.vue?vue&type=script&lang=js&\"\nexport * from \"./me.vue?vue&type=script&lang=js&\"\nimport style0 from \"./me.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('40b66da5')) {\n      api.createRecord('40b66da5', component.options)\n    } else {\n      api.reload('40b66da5', component.options)\n    }\n    module.hot.accept(\"./me.vue?vue&type=template&id=40b66da5&\", function () {\n      api.rerender('40b66da5', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"项目/Mall/pages/me/me.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./me.vue?vue&type=template&id=40b66da5&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./me.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./me.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport common from \"../../common/common.js\"\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\t\n\t\t}\n\t},\n\tmethods: {\n\t\t//跳转注册页面\n\t\treg:function(){\t\t\t\t\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/me/reg/reg'\n\t\t\t});\n\t\t},\n\t\t\n\t\t//获取手机号流程\n\t\tgetphonenumber:function(e){\n\t\t\t\n\t\t\t//获取到detail中的数据\n\t\t\t// console.log(e.detail.iv);\n\t\t\tvar ivObj = e.detail.iv\n\t\t\tvar phoneObj = e.detail.encryptedData\n\t\t\tvar code = ''\n\t\t\t\n\t\t\t//获取code\n\t\t\tuni.login({\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tconsole.log(res.code)\n\t\t\t\t\t\n\t\t\t\t\tuni.request({\n\t\t\t\t\t\turl: 'https://api.weixin.qq.com/sns/jscode2session',\n\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t appid:'wxee7e0d5161c61923',\n\t\t\t\t\t\t\t secret:'0e32dd95e20b576d6de4e5df32778519',\n\t\t\t\t\t\t     code: res.code,\n\t\t\t\t\t\t     encryptedData: phoneObj,\n\t\t\t\t\t\t     iv: ivObj\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif (e.detail.errMsg == 'getPhoneNumber:user deny') { //用户点击拒绝\n\t\t\t\t\t            wx.navigateTo({\n\t\t\t\t\t              url: '',\n\t\t\t\t\t            })\n\t\t\t\t\t          } else { //允许授权执行跳转\n\t\t\t\t\t            wx.navigateTo({\n\t\t\t\t\t              url: '',\n\t\t\t\t\t            })\n\t\t\t\t\t          }\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t},\n\t\t\n\t\t//微信登录流程。两步，第一是获取通用信息(在button中定义getuserinfo，然后执行getuserinof函数就好了)；第二是获取openid\n\t\tgetUserInfo:function(e){\n\t\t\tvar serverUrl = common.serverUrl\n\t\t\tvar nickName = ''\n\t\t\tvar avatarUrl = ''\n\t\t\tvar openid = ''\n\t\t\t\n\t\t\t//获取通用信息并且赋值\n\t\t\tuni.getUserInfo({\n\t\t\t\tsuccess() {\n\t\t\t\t\t// console.log(e.detail.userInfo)\n\t\t\t\t\tnickName =  e.detail.userInfo.nickName\n\t\t\t\t\tavatarUrl = e.detail.userInfo.avatarUrl\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t\t//获取openid并且写入数据库，缓存的流程\n\t\t\t//获取到code\n\t\t\tuni.login({\n\t\t\t\tsuccess: res => {\n\t\t\t\t\t// console.log(res.code)\n\t\t\t\t\t\n\t\t\t\t\t//利用code，进一步获得openid\n\t\t\t\t\tuni.request({\n\t\t\t\t\t\turl: 'https://api.weixin.qq.com/sns/jscode2session',\n\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tappid:'wxee7e0d5161c61923',\n\t\t\t\t\t\t\tsecret:'0e32dd95e20b576d6de4e5df32778519',\n\t\t\t\t\t\t\tjs_code:res.code,\n\t\t\t\t\t\t\tgrant_type:'authorization_code'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\t// console.log(res.data.openid)\n\t\t\t\t\t\t\topenid = res.data.openid\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//传到后端服务器。后端服务器需要判断是否已经登陆过，未登录则写入数据库，已经登陆过就直接返回登陆成功\n\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\turl: serverUrl+'/wx_check_reg_yonghu-weixin.php',\n\t\t\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\twx_openid: openid,\n\t\t\t\t\t\t\t\t\twx_nicheng: nickName,\n\t\t\t\t\t\t\t\t\twx_touxiang: avatarUrl\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\t\t\t// console.log(res.data)\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t//写入缓存\n\t\t\t\t\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\t\t\t\t    key: 'wx_login',\n\t\t\t\t\t\t\t\t\t    data: 'ok',\n\t\t\t\t\t\t\t\t\t    success: function () {\n\t\t\t\t\t\t\t\t\t        console.log('写入缓存成功');\n\t\t\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\t\t\t\t    key: 'wx_id',\n\t\t\t\t\t\t\t\t\t    data: res.data.uid,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\t\t\t\t    key: 'wx_nickName',\n\t\t\t\t\t\t\t\t\t    data: res.data.nickName,\n\t\t\t\t\t\t\t\t\t    success: function () {\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t//跳转到首页\n\t\t\t\t\t\t\t\t\t        uni.switchTab({\n\t\t\t\t\t\t\t\t\t        \turl: '/pages/index/index'\n\t\t\t\t\t\t\t\t\t        })\n\t\t\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./me.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./me.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}